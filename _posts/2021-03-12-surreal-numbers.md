---
layout: post
title: 超现实数学习笔记
subtitle: 草
tags: 博弈论 超现实数
---

这是真实的学习笔记，是读了Matrix67的[《实数、超实数和博弈游戏：数学的结构之美》](http://www.matrix67.com/blog/archives/6333)之后的笔记，当然我非常推荐大家去读一读Matrix67的这篇博客。

提示 : 这是一篇垃圾文章，作者水平比您低一大截，可能浪费您十分钟。

做了个不平等博弈题，然后爆零了/cy

超现实数理论的核心思想是，用数来表示博弈问题中的局面，从而方便地解决一些博弈问题。

现在，抛开所有你看过的超现实数理论，来享受Domineering游戏吧!希望这可以帮你更好地入门超现实数。

### Domineering

根据Matrix67的说法，John Conway是用一个游戏Domineering来解释超现实数的。关于Conway这个数学家，你可能听说过康威生命游戏。

这个游戏说的是有一个棋盘，Alice和Bob两个人轮流往上放多米诺骨牌，Alice只能放竖着的，而Bob只能放横着的。谁放不了了就输了。我们让Alice和Bob分别先手一次。

下面是五个简单的棋盘 : 

![pic1](/img/2021-03-12-surreal-numbers/pic1.png)

注意这确实是五个棋盘，因为空棋盘也是棋盘。

对于空棋盘，后手一定会赢。

对于第二个棋盘，后手还是一定会赢。

对于第三个，Alice放不动，Bob必胜。

对于第四个，Alice随便怎么放都会赢，而Bob一步也放不了，所以Alice必胜。这个棋盘我们可以起名叫I。

对于第五个，Alice可以放在左下角，那么Bob就没法放了；Bob放一步之后，Alice仍然可以放，所以Alice必胜。这个棋盘称为L。

### 棋局和棋局加法

定义棋局是若干棋盘放在一起。要玩一个棋局，每一步可以选择一个棋盘并放一个骨牌，只有所有棋盘都不能放骨牌了才算输。

两个棋局的和定义为一个新的棋局，这个新的棋局包含两个棋局中所有棋盘。

可以类比Nim游戏，一个棋盘是一堆石子，一个棋局就是若干堆石子，两个棋局的和就是把它们的石子们扔到一起。不过Nim跟Domineering可是完全不一样。

比如我们考虑一个简单的棋局

![pic2](/img/2021-03-12-surreal-numbers/pic2.png)

这个棋局是后手必胜的，你可以很容易地看出来。

### 加法逆元，加法单位元和大小关系

我们~~很自然地~~产生了一个问题，上面的I和L两个棋盘都是Alice必胜，那么哪一个上面Alice赢的更爽呢?

L棋盘有一种死法，而I没有，所以你可能会很自然地觉得I上面Alice赢得更爽。但是这样说好像很感性，没有什么依据。

一个想法是，让两个棋盘同时进行，不过在I棋盘上规则不变，在L棋盘上则要反过来——让Alice只能放横着的骨牌，而Bob只能放横着的。这样的话，就相当于让两个棋盘上Alice的优势抵消一下，看哪个棋盘的优势更大。

我们玩一玩会发现，这个棋局中Alice必胜，所以I棋盘的优势更大一些。

对于一个棋局$$S$$，如果我们交换Alice和Bob的角色，得到的新棋局称作$$S$$的反棋局，记为$$-S$$。可以发现反棋局就是把原来的棋局中每个棋盘都沿对角线翻转。

如果有两个棋局$$A,B$$，满足$$A+(-B)$$上Alice必胜，那么我们就知道在$$A$$上Alice更有优势。如果是Bob必胜，那么在I上Alice更有优势；如果是后手必胜，那么两个棋盘上Alice的优势是一样的。注意这里Alice可能不是赢的更爽，而是让Bob赢的更不爽，或者说Bob赢的越爽Alice越不爽。

既然我们都是对于Alice说爽不爽，我们干脆定义棋局的优劣为Alice爽的程度。这样就可以定义偏序关系$$\leq$$和$$\geq$$，$$A\leq B$$当且仅当$$A+(-B)$$是Alice必胜或者后手必胜的局面。

实际上我们可以发现这样一些事 : 

$$A\leq 0$$说明Alice先手必败，Bob后手必胜。

$$A\geq 0$$说明Bob先手必败，Alice后手必胜。

$$A\nleq 0$$说明Alice先手必胜，Bob后手必败。

$$A\ngeq 0$$说明Bob先手必胜，Alice后手必败。

再来一些定义 : 

$$A=0\Leftrightarrow A\leq 0\text{且}A\geq 0$$，这说明后手必胜。

$$A<0\Leftrightarrow A\leq 0\text{且}A\ngeq 0$$，这说明Alice必败，Bob必胜。

$$A>0\Leftrightarrow A\leq 0\text{且}A\geq 0$$，这说明Alice必胜，Bob必败。

少点什么!你发现我们没有先手必胜!

我们定义$$A\Vert 0$$为上面所有情况之外的情况，此时只可能先手必胜了。这个情况我们不做过多讨论。

### 一点瞎扯

不过上面的理论基本都是瞎扯，我们完全不知道为什么这样做是正确的。所以为了感性理解它的正确性，我们可以做一些简单的证明。

**瞎扯1** $$A$$和自己优劣程度一样，也就是$$A+(-A)$$是后手必胜的。

证明很简单，我们可以考虑让后手模仿先手，那么后手必胜。

**瞎扯2** Alice必胜的棋局$$A$$，优于任何一个后手必胜棋局$$B$$。

Alice第一步按照$$A$$的必胜策略走，接下来如果Bob在任何一个棋盘上走了一步她就跟着走一步，那么Bob不可能在任何一个棋盘上取胜。

上面还是博弈论，下面我们要开始超现实数了!

### 棋局和超现实数

定义一个棋局$$S$$的左集合$$\mathrm{L}(S)$$是Alice走一步之后可能得到的所有棋局的集合，右集合$$\mathrm{R}(S)$$是Bob走一步得到的。

如果两个棋局一步走到的棋局集合相同，那么它们是等价的，所以我们可以用$$S=\{\mathrm{L}(S)\vert\mathrm{R}(S)\}$$来表示一个棋局$$S$$。

那么看一下最开始的五个棋盘 : 

![pic1](/img/2021-03-12-surreal-numbers/pic1.png)

第一个是空棋盘，因为很空，我们记为$$0=\{\space\vert\space\}$$。

第二个棋盘没法走，它和空棋盘是等价的，也是$$0$$。

第三个棋盘Alice没法走，Bob可以走一步得到空棋盘，所以是$$\{\space\vert 0\}$$。这个局面Bob必胜，所以它$$\leq 0$$并且看起来非常简单(实际上是Bob必胜的最小局面)，那么我们不妨把它称为$$-1$$。同理，把这个棋盘翻过来就得到$$1=\{0\vert\space\}$$。

第四个棋盘Alice走一步可以得到第二个棋盘，Bob没法走，所以它是$$\{0\vert\space\}=1$$。

第五个棋盘Alice走一步可以得到两种情况 : 

两个 一个格子 的和，也就是$$0+0=0$$。

一个$$-1$$。

Bob走一步只能得到一种情况 : $$1$$。所以这个是$$\{-1,0\vert 1\}$$。

这个方法好像有点意思，毕竟博弈论最基本的原理就是考虑走一步之后的局面。我们考虑如何形式化地计算两个棋局的和 : 

$$
\{\mathrm{L}(A)\vert\mathrm{R}(A)\}+\{\mathrm{L}(B)\vert\mathrm{R}(B)\}=\left\{\bigcup_{u\in\mathrm{L}(A)}(u+B)+\bigcup_{v\in\mathrm{L}(B)}(A+v)\space\bigg\vert\space\bigcup_{u\in\mathrm{R}(A)}(u+B)+\bigcup_{v\in\mathrm{R}(B)}(A+v)\right\}
$$

这东西的意义是，你可以选择一个棋局走一步，或者选择另一个棋局走一步。你发现这是递归定义的，而递归的边界就是$$A+0=A$$，也就是说不管什么棋局，拼上一个$$0$$都是不变的，这也是$$0$$所以为$$0$$。

那么加法逆元，应该是

$$
-\{\mathrm{L}(A)\vert\mathrm{R}(A)\}=\{-\mathrm{R}(A)\vert-\mathrm{L}(A)\}
$$

这东西应该很好理解。

然后是一些奇妙的东西，我们定义

$$
\{\mathrm{L}(A)\vert\mathrm{R}(A)\}\leq0\Longleftrightarrow\forall u\in\mathrm{L}(A), u\ngeq 0
$$

，这好像是说，对于一个棋局Alice先手必败，当且仅当她随便走一步都必败。这好像很对。

你发现这样的定义下有

$$
\{\mathrm{L}(A)\vert\mathrm{R}(A)\}\leq\{\mathrm{L}(B)\vert\mathrm{R}(B)\}\Longleftrightarrow\forall u\in\mathrm{L}(A), u\ngeq B\text{ 且 }\forall v\in\mathrm{R}(B), v\nleq A
$$

，$$\geq$$是类似的。

所以我们之前定义的$$<,>,=$$都有了形式定义。

### The End

为什么就结束了?因为上面所讲的东西就是超现实数，我们已经得到了一个比较直观的理解，所以可以结束了。剩下的东西，左集合不大于等于右集合，乘法和乘法逆元，$$\Uparrow\Downarrow$$这些东西，实在是没法直观地解释。如果您还想继续学习，建议去看集训队论文。

