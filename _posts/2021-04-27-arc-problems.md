---
layout: post
title: AtC选㗅
subtitle: /kk
tags: 题选做 atc
---

A Way to Practice Competitive Programming里面说要做一做ARC的EF，所以就来做了（

然而放学了。明天再说。

如果将来做AGC的话也会写在这里，所以标题就叫AtC选㗅好了。

-----

ARC058E : 还真就不会做/kk

发现$$x+y+z$$小的可怜，只有$$17$$，看起来像是状压dp。

想了想怎么直接做，容易想到枚举四个端点然后背包预处理一个方案数，但是你发现这不行，因为一个序列可能有很多可行的区间。

所以需要容斥。但是这就需要钦定一堆区间然后算方案数，这太难了。

反过来做，考虑计算没有可行区间的方案数。

枚举可行区间的右端点，你发现存在以你枚举的右端点为右端点的可行区间，当且仅当这个右端点往左看，同时存在$$x+y+z,y+z,z$$三个后缀和。这启示我们把后缀和扔进状态。

设$$dp(i,S)$$表示长为$$i$$的序列，有集合$$S$$中的后缀和的方案数。注意到$$17$$以上的后缀和没有意义，所以状态数是$$O(2^{x+y+z}n)$$。转移枚举下一个选什么进行刷表，复杂度是$$O(2^{x+y+z}nv)$$。

-----

ARC058F : 神仙背包。

爆力dp就是设$$dp(i,j)$$表示用前$$i$$个串拼成长度为$$j$$的串，得到的字典序最小的串。复杂度是$$O(nk^2)$$。

考虑一件事情 : 如果$$dp(i,j_1)$$和$$dp(i,j_2)$$有不同的位，比如它们在$$l$$位前完全相同，但是$$dp(i,j_1)$$在第$$l$$位小于$$dp(i,j_2)$$，那么后面不管接上什么，$$j_1$$都比$$j_2$$优，所以$$j_2$$就是无用的。

这里有一个问题，就是如果$$dp(i,j_1)$$本身不可能转移到$$dp(n,k)$$，那么它有可能是随便拼出来的，我们要先倒着用长度跑一个可行性背包来筛去这些状态。

这个东西有什么用?它说明有用状态们一定都是最长的$$dp(i,j)$$的一个前缀。

考虑对于每个$$i$$的转移，我们维护一个长度递减的栈。每次转移完了当前的$$j$$，拿着它和栈顶也就是最长的串比较，如果栈顶是它的前缀，那么我们直接把它入栈，否则就看两个串哪个更优，如果当前串不优那就扔掉它，否则就弹掉栈顶继续检查下一个。

然后发现因为是前缀，我们可以只记录每个$$i$$最长的串，其它的都可以用长度表示。

现在只有一个问题了，怎么比较两个串。这个比较有两种

 - 转移的时候，比较一个$$dp$$加上一个$$s_i$$和一个$$dp$$

 - 弹栈的时候，比较两个$$dp$$

。当然可以二分hash!复杂度多个$$\log$$，过不去。

考虑使用Z algo，然后就$$O(nk+\vert s\vert)$$了。

然而我不会Z algo/cy

-----

ARC059E : 式子好长......

实际上这个超长式子是用来迷惑你的，真正的题意应该是对于每种兴奋度和每种分糖果方案求和。

设$$dp(i,j)$$表示前$$i$$个小朋友拿了$$j$$个糖的答案，转移枚举第$$i$$个小朋友的兴奋度和拿了多少糖，有

$$
\begin{aligned}
dp(i,j)&=\sum_{k=a_i}^{b_i}\sum_{l=0}^jk^ldp(i-1,j-l)\\
&=\sum_{l=0}^jdp(i-1,j-l)(\sum_{k=a_i}^{b_i}k^l)
\end{aligned}
$$

直接预处理后面那个括号即可，复杂度是$$O(n^3)$$。

-----

ARC059F : 字符串题?

然而不是。

首先有个奇妙想法，那就是得到任何一种字符串的方案数是相同的，所以这个$$S$$没有用，只有$$\vert S\vert$$有用。

可以先算出打出$$\vert S\vert$$长度的方案数，然后除一个$$2^{\vert S\vert}$$即可。

我们设$$dp(i,j)$$表示打了$$i$$次打出长度是$$j$$的方案数，那么有$$dp(i,j)=dp(i-1,j+1)+dp(i-1,j-1)$$，注意$$0$$处退格需要特判。复杂度$$O(n^2)$$。

AtC题还是很好玩的!

-----

ARC060E : 洛谷上D比E难?

经典题啊!倍增即可。

-----

ARC060F : 题意很麻烦。说的是，让你把一个串$$w$$划分成尽量少的段，使得每一段都不能划分成完全相同的若干段，求最小的划分段数和这样划分的方案数。

猜一个结论 : 如果$$w$$本身不能划分成完全相同的若干段，那么答案是$$1,1$$，如果$$w$$是一个字符重复若干次那么答案是$$\vert w\vert,1$$，否则是$$2$$，方案数可以正反两边kmp求出来。

草，一看题解发现对了/jk

这么猜测的原因是，如果$$1$$不是周期，那么至少需要选择所有质数周期才能ban掉所有分成两段的方案，而每次选一个质数就意味着要给串长乘上这个质数，就需要选择更多新的质数......所以是不可能ban完的。这句话是瞎写的，看不懂很正常/jk

-----

ARC061E : 非常简单，建个虚点处理中转，然后01bfs即可。

-----

ARC061F : 