---
layout: post
title: AGC选㗅
subtitle: fuck
tags: 题选做 atc
---

远古ARC(058~103)做完了，咕咕咕结束了，原坑 AGC数数题，但是反正要刷穿不如直接全做了。

打开AGC，从上往下做。简单题可能略过。

-----

AGC001B : 你发现这是一个类似于辗转相除的过程，所以就除就行了。存在直接用gcd算答案的方法，不过我不会推。

-----

AGC001C : 看起来好像有点好玩。首先直径上的点是一定要被删的，但是我们删哪一边呢?

不知道，但是我们可以连一条边表示两个点不共存。所以做法就是直接求出到一个点距离$$>k$$的点，爆力连边然后跑最大独立集。

最大独立集显然不行，如何优化?

这个是不是二分图?看起来不是。

这个有啥性质?你发现没有传递性，那还能有啥呢/yun

补图?最大独立集可以转为补图最大团，然后补图就是每个点连到一个邻域，这个有啥性质啊......算了吧，换个想法。

直径总是跟center相关，我们可以枚举一个center，然后保留到它距离不超过$$\frac{k}{2}$$的点，做完了。笑死我了。

-----

AGC001D : 考虑那个回文的条件说的是什么。我不知道（

考虑实际上说的就是我们根据这些回文的条件可以获得一组全部相等的条件，而回文的条件就是若干个 某两个字符相同。

考虑一个简单想法(反正我没想到)，你发现一个回文串和它shift一位拼起来会发生好玩的事情，比如说我知道$$[1,4]$$是回文，知道$$[2,5]$$是回文，那么就有$$1=4=3=2=5$$。所以说我们可以构造一个，$$b$$的第一项是$$a$$的第一项$$-1$$，最后一项则是$$+1$$，中间是一样的。

诶我们还没考虑奇回文。如果$$[1,5],[2,6]$$是回文，那就有$$1=5=3$$，诶推不动了/yun

这是为什么?从本质上来说，一共有六个数，但是长为五的回文串只确定两个等价关系，所以一共只有四个等价关系，连不起来。

那么也就是说奇数必须跟偶数贴在一起，比如$$[1,5],[1,4]$$是回文，那就有$$5=1=4=2=3$$，$$5$$是可以和后面接起来的。所以如果奇数不超过两个，我们就把一个奇数放在最前面，另一个奇数(或者某个偶数)放在最后面，然后按照上面的方法构造即可。

-----

AGC001E : 来好玩的了。数数题，虽然不够数数。

先变成有序对并且可以相同，最后减去自己和自己再除一个$$2$$即可。

你发现值域很小，直觉是复杂度是$$O(n\log n+v^2)$$。

考虑那个式子是什么，它就是$$\frac{(a_i+a_j+b_i+b_j)!}{(a_i+a_j)!(b_i+b_j)!}$$，所以我们枚举$$a_i+a_j$$和$$b_i+b_j$$，目标就变成算有多少对满足$$a_i+a_j=x,b_i+b_j=y$$。这个看起来也很困难/jk

算多少对满足$$a_i+a_j=x$$是简单的，只需要法法塔就好了。这样的话这个就是二维卷积，虽然可以转化成普通卷积，但是4e6的范围还是受不太了。

还是来点神仙做法吧。考虑怎么分离$$i,j$$，可以使用范德蒙德卷积，看起来更好的方法是使用它的一个对称的变形$$\binom{a+b}{c+d}=\sum\limits_{i=0}^k\binom{a}{c+i}\binom{b}{d-i}$$，于是我们得到

$$
\sum_{k=0}^{v}\left(\sum_{i=1}^n\binom{a_i+b_i}{a_i+k}\right)\left(\sum_{j=1}^n\binom{a_j+b_j}{a_j-k}\right)
$$

那么问题变成怎么对$$k$$从$$-v$$到$$v$$，求$$f(k)=\sum_{i=1}^n\binom{a_i+b_i}{a_i+k}$$。

考虑$$a_i+b_i$$和$$a_i+k$$都很小，于是我们考虑每个$$i$$对哪些$$f$$有怎样的贡献。容易发现每个$$i$$的贡献从$$b_i$$开始，可以认为一直延伸到无穷处(因为正的下指标不需要边界，但是负的需要)。

为了使用OGF，我们先给$$f$$ shift $$v$$位，这样就避免负的下标了。

考虑$$\binom{a_i+b_i}{a_i+k}$$在$$k=-a_i,-a_i+1,...$$处的值的OGF(当然也shift $$v$$位)，它就是$$z^{v-a_i}(1+z)^{a_i+b_i}$$，所以答案的OGF即为

$$
A(z)=\sum_{i=1}^nz^{v-a_i}(1+z)^{a_i+b_i}
$$

。注意到乘$$(1+z)^{a_i+b_i}$$是容易的，所以我们枚举$$a_i+b_i$$，此时对应的所有$$z^{v-a_i}$$加起来得到一个多项式(这也是为什么我们不枚举$$v-a_i$$，因为$$(1+z)^k$$们加起来得到的多项式不容易快速计算)，可以爆力求出它在$$0,...,2v$$的点值，然后爆力卷上$$(1+z)^{a_i+b_i}$$加入答案即可。

啊你问怎么卷?卷$$1+z$$就是前缀和，卷$$(1+z)^k$$就是$$k$$阶前缀和，直接组合数算出每个数被前面每个数贡献多少次，然后拆一下递推即可。

另一个做法是这个式子具有非常明确的组合意义，也就是从$$(0,0)$$走到$$(a_i+a_j,b_i+b_j)$$的方案数。注意到它等价于从$$(-a_i,-b_i)$$走到$$(a_j,b_j)$$的方案数，所以我们就完成了分离，并且可以用一个dp直接统计答案。

-----

