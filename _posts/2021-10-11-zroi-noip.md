---
layout: post
title: zroi noip18联测
subtitle: fuck
tags: 课
---

以及两天的杂题选讲（

## Day1

杂题选讲。

-----

CF1427E Xum

牛逼题/jy

直接想法是，随$$10^3$$个倍数插入线性基，但是这个好像不太行。

更随的想法是，直接随$$10^5$$次操作插入线性基，这个好像很可以。

简单做法是，考虑每次消去最高位，于是设$$x$$的位数是$$k$$，你就考虑把$$x$$左移$$k-1$$位使得它的最低位和$$x$$的最高位对齐，记为$$t$$，那么$$y=x\operatorname{xor}t$$就消去了$$x$$的最高位。此时我们把这个数以$$x$$的最高位分成两部分，高一半就是$$t-1$$，而低一半是$$x$$除去最高位。

然后我们给$$y$$再加上$$t$$，低一半不变，高一半变成$$2t-1$$。注意到$$2t$$的$$\mathrm{lowbit}$$必然是$$2$$，于是这里必然在$$2$$上造成退位，于是它的$$2$$这一位变成$$0$$而$$1$$这一位变成$$1$$。

考虑$$2t$$，我们计算$$(x+2t)\operatorname{xor}(y+t)$$，$$x+2t$$在$$k,k+1$$位上是$$1,1$$，而$$y+t$$是$$1,0$$。我们得到了一个$$2^{k+1}$$，但是本来打算要$$2^k$$来着¿

没有关系，我们可以用这个把$$t$$中$$>k$$位的$$1$$全都干掉，就得到了$$2^k$$。做完了。

惊悚做法是，考虑裴蜀定理。

发现$$x\operatorname{xor}t$$必然和$$x$$互质，因为$$x\operatorname{xor}t+2^k$$是$$x$$的倍数，而$$2^k$$不是。

所以我们exgcd解出一组$$a,b$$使得$$ax+by=1$$，现在问题是$$a,b$$可能有负数，正数直接做就完了。

考虑钦定$$b$$是负的，那么直接给$$b$$取负，问题变成实现减法。注意到$$ax,by$$是相邻的，于是如果是奇数减偶数就可以直接$$\mathrm{xor}$$，如果是偶数减奇数那我们就都加上$$x$$，就变成奇数减偶数了。

-----

CF1340D Nastya and Time Machine

classic/jy

收录于 CF思维题选胡。

-----

CF1442D Sum

classic/jy

收录于 CF再选做。

-----

CF1446C Xor Tree

建立trie，设$$dp(u)$$表示$$u$$子树最多保留几个点。发现只选一棵子树一定是可以的，如果选了两棵子树，那么其中一棵一定只有一个点，超过一个则会自己连自己，两边就不连通了。

-----

CF1439B Graph Subset Problem

classic/jy

收录于 CF思维题选胡。

-----

洛谷P4007 小Y和恐怖的奴隶主

看起来就直接设$$dp(i,a,b,c)$$表示打了$$i$$下，有$$a,b,c$$个$$1,2,3$$血量的随从概率，$$f(i)$$表示打boss次数的期望，转移是线性变换，状态数大概不到$$500$$，矩阵快速幂即可。多测就预处理幂，矩阵乘向量。

实际上据说状态数是$$166$$(包括$$f$$)/jy

-----

HDU6145 Arithmetic of Bomb II

看起来很有儒略日内味。

考虑我们把每个bomb表达式标准化成左闭右开，也就是左边是数字，右边是运算符。

如果一个bomb表达式两边都是符号，那它就完了。如果两边都是数字，我们可以拆出第一段和最后一段，把中间搞成左闭右开。

然后就可以考虑，如果最后一个是加号那就简简单单；如果最后一个是乘号，如果全是乘号那就直接做，否则就把最前和最后一项拼起来，还是特判开头结尾。做完了。

然后听说是矩阵快速幂/jy

考虑一个牛逼做法，我们维护三元组$$a+bc$$，那么加入一个数字和三种符号都是线性变换，做完了。

-----

Gym100543L Outer space invaders

离离原上谱，区间dp。

考虑设$$dp(i,j)$$表示干掉左右端点都在$$[l,r]$$的敌人的最小代价，那么最远的那个一定要为它开一炮，于是我们可以枚举什么时刻把它干了，就分成两段了。

这还是一个扫描线方向的问题，这个做法就是按距离从上到下扫描线。所以还是不要一上来就咬定自己的扫描线方向。

-----

Gym101480E Export Estimate

扫描线。

注意到所有二度点都会被删掉，会减少一条边。

然后考虑自环不会被删。

并查集维护即可。

-----

Gym101620J Justified Jungle

$$k+1$$必然是$$n$$的因数，所以就枚举一个大力模拟即可。

然后你发现砍了一个点的父边，当且仅当它的子树大小是$$\frac{n}{k+1}$$的倍数，于是做完了。想不到吧，狄利克雷前缀和一下，这是$$O(n\log\log n)$$的/jy

------

Gym101620L Lunar Landscape

垂直于纸面向外扫描线（

坐标极小，我们直接算每个格子被覆盖多少次(斜边上是0.5次)，两类分别差分-前缀和即可。

哦注意到斜边有四类，所以我们需要给每一类斜边都开一个差分-前缀和，所以是六个/jy

-----

AGC052B Tree Edges XOR

随便找一个点作为根，求一个树上前缀和，那么边权就变成了点权的$$\mathrm{xor}$$。

考虑此时一个操作的效果，发现它就是交换端点的点权。

所以我们直接判断两个集合是否相等，然后就wa飞了。

考虑这个找一个根，相当于钦定了一个点点权是$$0$$，但是后面这个点权可能换走了。所以我们需要枚举那个点权换到哪里去了，或者枚举它可能还被钦定成了什么(这个数一定可以是某个$$d$$)，这就$$n^2$$了。

注意到$$n$$是奇数，所以我们给所有数都$$\mathrm{xor}$$上全局$$\mathrm{xor}$$和，就相当于把它们标准化了，判断是否同构即可。

另一个直接且爆力的想法是，我们直接找到一组点权$$f$$，使得一条边的权值是端点权值的$$\mathrm{xor}$$。为了保证唯一性，由于$$n$$是奇数，我们可以限制总$$\mathrm{xor}$$和是$$0$$。直接分配，然后给每个数$$\mathrm{xor}$$上总$$\mathrm{xor}$$和，判断是否同构即可。